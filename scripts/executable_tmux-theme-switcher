#!/bin/bash

# Wrapper script that takes theme as an argument
# Usage: ./switch-theme.sh [theme_name]

THEMES_DIR="$HOME/tmux-themes"
DEFAULT_THEME="gruvbox"

# Get theme from argument or file, with fallback to default
theme="${1:-$(cat /tmp/theme 2>/dev/null | tr -d '[:space:]')}"
theme="${theme:-$DEFAULT_THEME}"

# Source theme file (fallback to default if theme file doesn't exist)
if [[ ! -f "$THEMES_DIR/${theme}.conf" ]]; then
    theme="$DEFAULT_THEME"
fi
tmux source-file "$THEMES_DIR/${theme}.conf"

# Set tmux environment variable
tmux set-environment -g THEME "$theme"

